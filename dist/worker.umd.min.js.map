{"version":3,"sources":["../src/worker.js"],"names":["interceptConsoleLog","consoleIntercepted","const","lastTestIndex","originalLog","console","log","let","message","Array","prototype","join","call","arguments","test","apply","replace","match","g1","g2","simulationConsoleLogs","startsWith","splice","undefined","length","pop","push","errorToJson","error","json","name","propertyNames","Object","getOwnPropertyNames","i","list","propertyName","createRef","url","spec","context","ref","Firebase","by","orderByKey","orderByValue","orderByChild","at","equalTo","from","startAt","to","endAt","first","limitToFirst","last","limitToLast","e","extra","normalizeFirebaseValue","value","isArray","normalValue","item","key","hasOwnProperty","areEqualNormalFirebaseValues","a","b","acceptConnections","onconnect","self","event","fireworkers","Fireworker","ports","localStorage","flushPending","simulationQueue","Promise","resolve","LocalStorage","this","_items","_pendingItems","_initialized","_flushPending","bind","init","items","_update","then","setTimeout","_send","msg","prototypeAccessors","get","n","getItem","setItem","targetItem","removeItem","this$1","clear","Branch","_root","set","diff","pathPrefix","updates","segments","split","_diffRecursively","oldValue","newValue","keysToReplace","childKey","replaceChild","concat","port","ping","_port","_lastWriteSerial","_callbacks","_messages","_flushMessageQueue","onmessage","_receive","storage","exposedFunctionNames","keys","_exposed","version","firebaseSdkVersion","SDK_VERSION","destroy","callback","cancel","k","indexOf","lastTouched","Date","now","bounceConnection","goOffline","goOnline","_firstMessageReceived","data","_receiveMessage","promise","fn","Error","writeSerial","Math","max","immediateFailure","reject","oneWay","result","id","postMessage","args","authWithCustomToken","authToken","options","unauth","onAuth","callbackId","authCallback","_onAuthCallback","_offAuth","offAuth","auth","update","once","snapshot","_snapshotToJson","on","listenerKey","eventType","sync","branch","off","snapshotCallback","_onSnapshotCallback","cancelCallback","_onCancelCallback","rest","path","decodeURIComponent","toString","val","childPath","snapshotJson","transaction","ref$1","stale","relativeUpdates","transactionPath","relativePath","object","child","catch","committed","snapshots","onDisconnect","method","simulate","token","simulatedFirebase","remember","code","toLowerCase","expose","lastConnectionCheck","setInterval","gap","forEach","worker","window"],"mappings":"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","file":"worker.umd.min.js","sourcesContent":["/* globals Firebase, setTimeout, setInterval */\n\nconst fireworkers = [];\nlet simulationQueue = Promise.resolve(), consoleIntercepted = false, simulationConsoleLogs;\n// This version is filled in by the build, don't reformat the line.\nconst VERSION = '0.8.1';\n\n\nclass LocalStorage {\n  constructor() {\n    this._items = [];\n    this._pendingItems = [];\n    this._initialized = false;\n    this._flushPending = this.flushPending.bind(this);\n  }\n\n  init(items) {\n    if (!this._initialized) {\n      this._items = items;\n      this._initialized = true;\n    }\n  }\n\n  _update(item) {\n    if (!this._pendingItems.length) Promise.resolve().then(this._flushPending);\n    this._pendingItems.push(item);\n  }\n\n  flushPending() {\n    if (!this._pendingItems.length) return;\n    if (!fireworkers.length) {\n      setTimeout(this._flushPending, 200);\n      return;\n    }\n    fireworkers[0]._send({msg: 'updateLocalStorage', items: this._pendingItems});\n    this._pendingItems = [];\n  }\n\n  get length() {return this._items.length;}\n\n  key(n) {\n    return this._items[n].key;\n  }\n\n  getItem(key) {\n    for (const item of this._items) {\n      if (item.key === key) return item.value;\n    }\n    return null;\n  }\n\n  setItem(key, value) {\n    let targetItem;\n    for (const item of this._items) {\n      if (item.key === key) {\n        targetItem = item;\n        item.value = value;\n        break;\n      }\n    }\n    if (!targetItem) {\n      targetItem = {key, value};\n      this._items.push(targetItem);\n    }\n    this._update(targetItem);\n  }\n\n  removeItem(key) {\n    for (let i = 0; i < this._items.length; i++) {\n      if (this._items[i].key === key) {\n        this._items.splice(i, 1);\n        this._update({key, value: null});\n        break;\n      }\n    }\n  }\n\n  clear() {\n    for (const item in this._items) {\n      this._update({key: item.key, value: null});\n    }\n    this._items = [];\n  }\n}\n\nself.localStorage = new LocalStorage();\n\n\nclass Branch {\n  constructor() {\n    this._root = null;\n  }\n\n  set(value) {\n    this._root = value;\n  }\n\n  diff(value, pathPrefix) {\n    const updates = {};\n    const segments = pathPrefix === '/' ? [''] : pathPrefix.split('/');\n    if (this._diffRecursively(this._root, value, segments, updates)) {\n      this._root = value;\n      updates[pathPrefix] = value;\n    }\n    return updates;\n  }\n\n  _diffRecursively(oldValue, newValue, segments, updates) {\n    if (oldValue === undefined) oldValue = null;\n    if (newValue === undefined) newValue = null;\n    if (oldValue === null) return newValue !== null;\n    if (oldValue instanceof Object && newValue instanceof Object) {\n      let replace = true;\n      const keysToReplace = [];\n      for (const childKey in newValue) {\n        if (!newValue.hasOwnProperty(childKey)) continue;\n        const replaceChild = this._diffRecursively(\n          oldValue[childKey], newValue[childKey], segments.concat(childKey), updates);\n        if (replaceChild) {\n          keysToReplace.push(childKey);\n        } else {\n          replace = false;\n        }\n      }\n      if (replace) return true;\n      for (const childKey in oldValue) {\n        if (!oldValue.hasOwnProperty(childKey) || newValue.hasOwnProperty(childKey)) continue;\n        updates[segments.concat(childKey).join('/')] = null;\n        delete oldValue[childKey];\n      }\n      for (const childKey of keysToReplace) {\n        updates[segments.concat(childKey).join('/')] = newValue[childKey];\n        oldValue[childKey] = newValue[childKey];\n      }\n    } else {\n      return newValue !== oldValue;\n    }\n  }\n}\n\n\nexport default class Fireworker {\n  constructor(port) {\n    this.ping();\n    this._port = port;\n    this._lastWriteSerial = 0;\n    this._callbacks = {};\n    this._messages = [];\n    this._flushMessageQueue = this._flushMessageQueue.bind(this);\n    port.onmessage = this._receive.bind(this);\n  }\n\n  init({storage, url}) {\n    if (storage) self.localStorage.init(storage);\n    if (url) createRef(url);\n    return {\n      exposedFunctionNames: Object.keys(Fireworker._exposed),\n      version: VERSION,\n      firebaseSdkVersion: Firebase.SDK_VERSION\n    };\n  }\n\n  destroy() {\n    for (const key in this._callbacks) {\n      const callback = this._callbacks[key];\n      if (callback.cancel) callback.cancel();\n    }\n    this._callbacks = {};\n    this._port.onmessage = null;\n    this._messages = [];\n    const k = fireworkers.indexOf(this);\n    if (k >= 0) fireworkers[k] = null;\n  }\n\n  ping() {\n    this.lastTouched = Date.now();\n  }\n\n  bounceConnection() {\n    Firebase.goOffline();\n    Firebase.goOnline();\n  }\n\n  _receive(event) {\n    Fireworker._firstMessageReceived = true;\n    this.lastTouched = Date.now();\n    for (const message of event.data) this._receiveMessage(message);\n  }\n\n  _receiveMessage(message) {\n    let promise;\n    try {\n      const fn = this[message.msg];\n      if (typeof fn !== 'function') throw new Error('Unknown message: ' + message.msg);\n      if (message.writeSerial) {\n        this._lastWriteSerial = Math.max(this._lastWriteSerial, message.writeSerial);\n      }\n      promise = Promise.resolve(fn.call(this, message));\n    } catch (e) {\n      e.immediateFailure = true;\n      promise = Promise.reject(e);\n    }\n    if (!message.oneWay) {\n      promise.then(result => {\n        this._send({msg: 'resolve', id: message.id, result});\n      }, error => {\n        this._send({msg: 'reject', id: message.id, error: errorToJson(error)});\n      });\n    }\n  }\n\n  _send(message) {\n    if (!this._messages.length) Promise.resolve().then(this._flushMessageQueue);\n    this._messages.push(message);\n  }\n\n  _flushMessageQueue() {\n    this._port.postMessage(this._messages);\n    this._messages = [];\n  }\n\n  call({name, args}) {\n    try {\n      return Promise.resolve(Fireworker._exposed[name].apply(null, args));\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  }\n\n  authWithCustomToken({url, authToken, options}) {\n    return createRef(url).authWithCustomToken(authToken, options);\n  }\n\n  unauth({url}) {\n    return createRef(url).unauth();\n  }\n\n  onAuth({url, callbackId}) {\n    const authCallback = this._callbacks[callbackId] = this._onAuthCallback.bind(this, callbackId);\n    authCallback.cancel = this._offAuth.bind(this, url, authCallback);\n    createRef(url).onAuth(authCallback);\n  }\n\n  _offAuth(url, authCallback) {\n    createRef(url).offAuth(authCallback);\n  }\n\n  _onAuthCallback(callbackId, auth) {\n    this._send({msg: 'callback', id: callbackId, args: [auth]});\n  }\n\n  set({url, value}) {\n    return createRef(url).set(value);\n  }\n\n  update({url, value}) {\n    return createRef(url).update(value);\n  }\n\n  once({url}) {\n    return createRef(url).once('value').then(snapshot => this._snapshotToJson(snapshot));\n  }\n\n  on({listenerKey, url, spec, eventType, callbackId, options}) {\n    options = options || {};\n    if (options.sync) options.branch = new Branch();\n    options.cancel = this.off.bind(this, {listenerKey, url, spec, eventType, callbackId});\n    const snapshotCallback = this._callbacks[callbackId] =\n      this._onSnapshotCallback.bind(this, callbackId, options);\n    snapshotCallback.listenerKey = listenerKey;\n    snapshotCallback.eventType = eventType;\n    snapshotCallback.cancel = options.cancel;\n    const cancelCallback = this._onCancelCallback.bind(this, callbackId);\n    createRef(url, spec).on(eventType, snapshotCallback, cancelCallback);\n  }\n\n  off({listenerKey, url, spec, eventType, callbackId}) {\n    let snapshotCallback;\n    if (callbackId) {\n      // Callback IDs will not be reused across on() calls, so it's safe to just delete it.\n      snapshotCallback = this._callbacks[callbackId];\n      delete this._callbacks[callbackId];\n    } else {\n      for (const key of Object.keys(this._callbacks)) {\n        if (!this._callbacks.hasOwnProperty(key)) continue;\n        const callback = this._callbacks[key];\n        if (callback.listenerKey === listenerKey &&\n            (!eventType || callback.eventType === eventType)) {\n          delete this._callbacks[key];\n        }\n      }\n    }\n    createRef(url, spec).off(eventType, snapshotCallback);\n  }\n\n  _onSnapshotCallback(callbackId, options, snapshot) {\n    if (options.sync && options.rest) {\n      const path = decodeURIComponent(\n        snapshot.ref().toString().replace(/.*?:\\/\\/[^/]*/, '').replace(/\\/$/, ''));\n      let value;\n      try {\n        value = normalizeFirebaseValue(snapshot.val());\n      } catch (e) {\n        options.cancel();\n        this._onCancelCallback(callbackId, e);\n        return;\n      }\n      const updates = options.branch.diff(value, path);\n      for (const childPath in updates) {\n        if (!updates.hasOwnProperty(childPath)) continue;\n        this._send({\n          msg: 'callback', id: callbackId,\n          args: [null, {\n            path: childPath, value: updates[childPath], writeSerial: this._lastWriteSerial\n          }]\n        });\n      }\n    } else {\n      try {\n        const snapshotJson = this._snapshotToJson(snapshot);\n        if (options.sync) options.branch.set(snapshotJson.value);\n        this._send({msg: 'callback', id: callbackId, args: [null, snapshotJson]});\n        options.rest = true;\n      } catch (e) {\n        options.cancel();\n        this._onCancelCallback(callbackId, e);\n      }\n    }\n  }\n\n  _onCancelCallback(callbackId, error) {\n    delete this._callbacks[callbackId];\n    this._send({msg: 'callback', id: callbackId, args: [errorToJson(error)]});\n  }\n\n  transaction({url, oldValue, relativeUpdates}) {\n    const transactionPath = decodeURIComponent(url.replace(/.*?:\\/\\/[^/]*/, '').replace(/\\/$/, ''));\n    const ref = createRef(url);\n    const branch = new Branch();\n    let stale;\n\n    return ref.transaction(value => {\n      value = normalizeFirebaseValue(value);\n      stale = !areEqualNormalFirebaseValues(value, oldValue);\n      if (stale) value = oldValue;\n      if (relativeUpdates) {\n        for (const relativePath in relativeUpdates) {\n          if (!relativeUpdates.hasOwnProperty(relativePath)) continue;\n          if (relativePath) {\n            const segments = relativePath.split('/');\n            if (value === undefined || value === null) value = {};\n            let object = value;\n            for (let i = 0; i < segments.length - 1; i++) {\n              const key = segments[i];\n              let child = object[key];\n              if (child === undefined || child === null) child = object[key] = {};\n              object = child;\n            }\n            object[segments[segments.length - 1]] = relativeUpdates[relativePath];\n          } else {\n            value = relativeUpdates[relativePath];\n          }\n        }\n      }\n      branch.set(value);\n      if (!stale) return value;\n    }).catch(error => {\n      if (error.message === 'set' || error.message === 'disconnect') {\n        return ref.once('value').then(snapshot => {\n          return {committed: false, snapshots: [snapshot], writeSerial: this._lastWriteSerial};\n        });\n      }\n      return Promise.reject(error);\n    }).then(result => {\n      const snapshots = [];\n      const updates = branch.diff(normalizeFirebaseValue(result.snapshot.val()), transactionPath);\n      for (const path in updates) {\n        if (!updates.hasOwnProperty(path)) continue;\n        snapshots.push({\n          path, value: updates[path], writeSerial: result.writeSerial || this._lastWriteSerial\n        });\n      }\n      return {committed: !stale, snapshots};\n    });\n  }\n\n  _snapshotToJson(snapshot) {\n    const path =\n      decodeURIComponent(snapshot.ref().toString().replace(/.*?:\\/\\/[^/]*/, '').replace(/\\/$/, ''));\n    return {\n      path, value: normalizeFirebaseValue(snapshot.val()), writeSerial: this._lastWriteSerial\n    };\n  }\n\n  onDisconnect({url, method, value}) {\n    const onDisconnect = createRef(url).onDisconnect();\n    return onDisconnect[method](value);\n  }\n\n  simulate({token, method, url, spec, args}) {\n    interceptConsoleLog();\n    let simulatedFirebase;\n    return (simulationQueue = simulationQueue.catch(() => {/* ignore */}).then(() => {\n      simulationConsoleLogs = [];\n      simulatedFirebase = createRef(url, spec, 'permission_denied_simulator');\n      simulatedFirebase.unauth();\n      return simulatedFirebase.authWithCustomToken(token, () => {/* ignore */}, {remember: 'none'});\n    }).then(() => {\n      return simulatedFirebase[method].apply(simulatedFirebase, args);\n    }).then(() => {\n      return null;\n    }, e => {\n      const code = e.code || e.message;\n      if (code && code.toLowerCase() === 'permission_denied') {\n        return simulationConsoleLogs.join('\\n');\n      }\n      return 'Got a different error in simulation: ' + e;\n    }));\n  }\n\n  static expose(fn, name) {\n    name = name || fn.name;\n    if (!name) throw new Error('Cannot expose a function with no name: ' + fn);\n    if (Fireworker._exposed.hasOwnProperty(name)) {\n      throw new Error(`Function ${name}() already exposed`);\n    }\n    if (Fireworker._firstMessageReceived) {\n      throw new Error('Too late to expose function, worker in use');\n    }\n    Fireworker._exposed[name] = fn;\n  }\n}\n\nFireworker._exposed = {};\nFireworker._firstMessageReceived = false;\n\n\nfunction interceptConsoleLog() {\n  if (consoleIntercepted) return;\n  const originalLog = console.log;\n  let lastTestIndex;\n  console.log = function() {\n    let message = Array.prototype.join.call(arguments, ' ');\n    if (!/^(FIREBASE: \\n?)+/.test(message)) return originalLog.apply(console, arguments);\n    message = message\n      .replace(/^(FIREBASE: \\n?)+/, '')\n      .replace(/^\\s+([^.]*):(?:\\.(read|write|validate):)?.*/g, function(match, g1, g2) {\n        g2 = g2 || 'read';\n        if (g2 === 'validate') g2 = 'value';\n        return ' ' + g2 + ' ' + g1;\n      });\n    if (/^\\s+/.test(message)) {\n      const match = message.match(/^\\s+=> (true|false)/);\n      if (match) {\n        if (match[1] === 'true' && simulationConsoleLogs[lastTestIndex].startsWith(' value')) {\n          simulationConsoleLogs.splice(lastTestIndex, 1);\n        } else {\n          simulationConsoleLogs[lastTestIndex] =\n            (match[1] === 'true' ? ' \\u2713' : ' \\u2717') + simulationConsoleLogs[lastTestIndex];\n        }\n        lastTestIndex = undefined;\n      } else {\n        if (lastTestIndex === simulationConsoleLogs.length - 1) simulationConsoleLogs.pop();\n        simulationConsoleLogs.push(message);\n        lastTestIndex = simulationConsoleLogs.length - 1;\n      }\n    } else if (/^\\d+:\\d+: /.test(message)) {\n      simulationConsoleLogs.push('   ' + message);\n    } else {\n      if (lastTestIndex === simulationConsoleLogs.length - 1) simulationConsoleLogs.pop();\n      simulationConsoleLogs.push(message);\n      lastTestIndex = undefined;\n    }\n  };\n  consoleIntercepted = true;\n}\n\nfunction errorToJson(error) {\n  const json = {name: error.name};\n  const propertyNames = Object.getOwnPropertyNames(error);\n  for (const propertyName of propertyNames) {\n    json[propertyName] = error[propertyName];\n  }\n  return json;\n}\n\nfunction createRef(url, spec, context) {\n  try {\n    let ref = new Firebase(url, context);\n    if (spec) {\n      switch (spec.by) {\n        case '$key': ref = ref.orderByKey(); break;\n        case '$value': ref = ref.orderByValue(); break;\n        default: ref = ref.orderByChild(spec.by); break;\n      }\n      if (spec.at) ref = ref.equalTo(spec.at);\n      else if (spec.from) ref = ref.startAt(spec.from);\n      else if (spec.to) ref = ref.endAt(spec.to);\n      if (spec.first) ref = ref.limitToFirst(spec.first);\n      else if (spec.last) ref = ref.limitToLast(spec.last);\n    }\n    return ref;\n  } catch (e) {\n    e.extra = {url, spec, context};\n    throw e;\n  }\n}\n\nfunction normalizeFirebaseValue(value) {\n  if (Array.isArray(value)) {\n    const normalValue = {};\n    for (let i = 0; i < value.length; i++) {\n      const item = value[i];\n      if (item === undefined || item === null) continue;\n      normalValue[i] = normalizeFirebaseValue(item);\n    }\n    return normalValue;\n  }\n  if (value instanceof Object) {\n    for (const key in value) {\n      if (value.hasOwnProperty(key)) value[key] = normalizeFirebaseValue(value[key]);\n    }\n  }\n  return value;\n}\n\n\nfunction areEqualNormalFirebaseValues(a, b) {\n  if (a === b) return true;\n  if ((a === null || a === undefined) && (b === null || b === undefined)) return true;\n  if (a === null || b === null) return false;\n  if (!(typeof a === 'object' && typeof b === 'object')) return false;\n  for (const key in a) {\n    if (!a.hasOwnProperty(key) || !b.hasOwnProperty(key)) return false;\n    if (!areEqualNormalFirebaseValues(a[key], b[key])) return false;\n  }\n  for (const key in b) {\n    if (!a.hasOwnProperty(key) || !b.hasOwnProperty(key)) return false;\n  }\n  return true;\n}\n\nfunction acceptConnections() {\n  if (typeof onconnect !== 'undefined') {\n    self.onconnect = function(event) {\n      fireworkers.push(new Fireworker(event.ports[0]));\n    };\n  } else {\n    fireworkers.push(new Fireworker(self));\n  }\n  self.localStorage.flushPending();\n}\n\nconst CONNECTION_CHECK_INTERVAL = 60 * 1000;\nlet lastConnectionCheck = Date.now();\nsetInterval(function findAbandonedConnections() {\n  const now = Date.now(), gap = now - lastConnectionCheck - CONNECTION_CHECK_INTERVAL;\n  lastConnectionCheck = now;\n  fireworkers.forEach(worker => {\n    if (!worker) return;\n    if (gap >= 1000 && worker.lastTouched <= now - gap) worker.lastTouched += gap;\n    if (now - worker.lastTouched >= 3 * CONNECTION_CHECK_INTERVAL) worker.destroy();\n  });\n  let k;\n  while ((k = fireworkers.indexOf(null)) >= 0) fireworkers.splice(k, 1);\n}, CONNECTION_CHECK_INTERVAL);\n\nself.window = self;\nacceptConnections();\n"]}