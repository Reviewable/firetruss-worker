{"version":3,"file":"worker.umd.min.js","sources":["../src/worker.js"],"names":["fireworkers","apps","random","crypto","getRandomValues","Uint32Array","livenessLockName","Date","now","lockReady","Promise","resolve","reject","navigator","locks","request","catch","self","localStorage","constructor","this","_items","_pendingItems","_initialized","_flushPending","flushPending","bind","init","items","_update","item","length","then","push","_send","msg","setTimeout","key","n","getItem","value","setItem","let","targetItem","removeItem","i","splice","clear","Branch","_root","set","diff","pathPrefix","updates","segments","split","_diffRecursively","oldValue","newValue","undefined","Object","replace","childKey","keysToReplace","hasOwn","concat","join","Fireworker","port","_port","_lastWriteSerial","_app","_cachedAuth","_cachedDatabase","_lastJsonUser","_configError","_staticConfigError","_callbacks","_messages","_flushMessageQueue","_logging","onmessage","_receive","_auth","auth","Error","_database","_databaseWrapperCallback","database","storage","config","lockName","_destroy","databaseURL","firebase","initializeApp","apiKey","INTERNAL","forceWebSockets","useEmulator","disableWarnings","e","await","exposedFunctionNames","keys","_exposed","version","firebaseSdkVersion","SDK_VERSION","callback","cancel","k","indexOf","enableFirebaseLogging","enableLogging","ping","bounceConnection","goOffline","goOnline","event","_firstMessageReceived","message","data","_receiveMessage","promise","console","log","fn","writeSerial","Math","max","call","immediateFailure","oneWay","result","id","error","errorToJson","postMessage","name","cause","JSON","stringify","e2","args","apply","authWithCustomToken","authToken","signInWithCustomToken","userToJson","user","authAnonymously","signInAnonymously","unauth","signOut","currentUser","callbackId","onAuth","authCallback","_onAuthCallback","onIdTokenChanged","jsonUser","areEqualValues","a","b","Array","isArray","url","_createRef","update","once","snapshot","_snapshotToJson","on","listenerKey","spec","eventType","options","sync","branch","off","snapshotCallback","_onSnapshotCallback","cancelCallback","_onCancelCallback","rest","path","decodeURIComponent","ref","toString","normalizeFirebaseValue","val","childPath","snapshotJson","transaction","relativeUpdates","transactionPath","stale","committedValue","areEqualNormalFirebaseValues","relativePath","object","child","snapshots","committed","onDisconnect","method","refFromURL","by","orderByKey","orderByValue","orderByChild","at","equalTo","from","startAt","to","endAt","first","limitToFirst","last","limitToLast","extra","expose","_signalStaticConfigError","setDatabaseWrapperCallback","fireworker","propertyName","json","getOwnPropertyNames","type","normalValue","toJSON","stsTokenManager","getIdTokenResult","claims","exp","iat","window","onconnect","ports"],"mappings":"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"}