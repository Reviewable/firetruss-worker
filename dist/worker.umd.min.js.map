{"version":3,"file":"worker.umd.min.js","sources":["../src/worker.js"],"names":["fireworkers","apps","self","localStorage","constructor","this","_items","_pendingItems","_initialized","_flushPending","flushPending","bind","init","items","_update","item","length","Promise","resolve","then","push","_send","msg","setTimeout","key","n","getItem","value","setItem","let","targetItem","removeItem","i","splice","clear","Branch","_root","set","diff","pathPrefix","updates","segments","split","_diffRecursively","oldValue","newValue","undefined","Object","replace","childKey","keysToReplace","hasOwn","concat","join","Fireworker","port","_port","_lastWriteSerial","_app","_cachedAuth","_cachedDatabase","_lastJsonUser","_configError","_staticConfigError","_callbacks","_messages","_flushMessageQueue","_logging","onmessage","_receive","_auth","auth","Error","_database","_databaseWrapperCallback","database","storage","config","lockName","navigator","locks","request","_destroy","databaseURL","firebase","initializeApp","apiKey","INTERNAL","forceWebSockets","useEmulator","disableWarnings","e","exposedFunctionNames","keys","_exposed","version","firebaseSdkVersion","SDK_VERSION","callback","cancel","k","indexOf","enableFirebaseLogging","enableLogging","ping","bounceConnection","goOffline","goOnline","event","_firstMessageReceived","message","data","_receiveMessage","promise","console","log","fn","writeSerial","Math","max","call","immediateFailure","reject","oneWay","result","id","error","errorToJson","postMessage","name","cause","JSON","stringify","e2","args","apply","authWithCustomToken","authToken","signInWithCustomToken","userToJson","user","authAnonymously","signInAnonymously","unauth","signOut","catch","currentUser","callbackId","onAuth","authCallback","_onAuthCallback","onIdTokenChanged","jsonUser","areEqualValues","a","b","Array","isArray","url","_createRef","update","once","snapshot","_snapshotToJson","on","listenerKey","spec","eventType","options","sync","branch","off","snapshotCallback","_onSnapshotCallback","cancelCallback","_onCancelCallback","rest","path","decodeURIComponent","ref","toString","normalizeFirebaseValue","val","childPath","snapshotJson","transaction","relativeUpdates","transactionPath","stale","committedValue","areEqualNormalFirebaseValues","relativePath","object","child","snapshots","committed","onDisconnect","method","refFromURL","by","orderByKey","orderByValue","orderByChild","at","equalTo","from","startAt","to","endAt","first","limitToFirst","last","limitToLast","extra","expose","_signalStaticConfigError","setDatabaseWrapperCallback","fireworker","propertyName","json","getOwnPropertyNames","type","normalValue","toJSON","stsTokenManager","getIdTokenResult","claims","exp","iat","window","onconnect","ports"],"mappings":"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"}