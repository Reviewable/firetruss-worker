{"version":3,"file":"worker.es2015.js","sources":["../src/worker.js"],"sourcesContent":["/* globals Firebase, setTimeout, setInterval */\n\nconst fireworkers = [];\nlet simulationQueue = Promise.resolve(), consoleIntercepted = false, simulationConsoleLogs;\n// This version is filled in by the build, don't reformat the line.\nconst VERSION = '0.8.0';\n\n\nclass LocalStorage {\n  constructor() {\n    this._items = [];\n    this._pendingItems = [];\n    this._initialized = false;\n    this._flushPending = this.flushPending.bind(this);\n  }\n\n  init(items) {\n    if (!this._initialized) {\n      this._items = items;\n      this._initialized = true;\n    }\n  }\n\n  _update(item) {\n    if (!this._pendingItems.length) Promise.resolve().then(this._flushPending);\n    this._pendingItems.push(item);\n  }\n\n  flushPending() {\n    if (!this._pendingItems.length) return;\n    if (!fireworkers.length) {\n      setTimeout(this._flushPending, 200);\n      return;\n    }\n    fireworkers[0]._send({msg: 'updateLocalStorage', items: this._pendingItems});\n    this._pendingItems = [];\n  }\n\n  get length() {return this._items.length;}\n\n  key(n) {\n    return this._items[n].key;\n  }\n\n  getItem(key) {\n    for (const item of this._items) {\n      if (item.key === key) return item.value;\n    }\n    return null;\n  }\n\n  setItem(key, value) {\n    let targetItem;\n    for (const item of this._items) {\n      if (item.key === key) {\n        targetItem = item;\n        item.value = value;\n        break;\n      }\n    }\n    if (!targetItem) {\n      targetItem = {key, value};\n      this._items.push(targetItem);\n    }\n    this._update(targetItem);\n  }\n\n  removeItem(key) {\n    for (let i = 0; i < this._items.length; i++) {\n      if (this._items[i].key === key) {\n        this._items.splice(i, 1);\n        this._update({key, value: null});\n        break;\n      }\n    }\n  }\n\n  clear() {\n    for (const item in this._items) {\n      this._update({key: item.key, value: null});\n    }\n    this._items = [];\n  }\n}\n\nself.localStorage = new LocalStorage();\n\n\nclass Branch {\n  constructor() {\n    this._root = null;\n  }\n\n  set(value) {\n    this._root = value;\n  }\n\n  diff(value, pathPrefix) {\n    const updates = {};\n    const segments = pathPrefix === '/' ? [''] : pathPrefix.split('/');\n    if (this._diffRecursively(this._root, value, segments, updates)) {\n      this._root = value;\n      updates[pathPrefix] = value;\n    }\n    return updates;\n  }\n\n  _diffRecursively(oldValue, newValue, segments, updates) {\n    if (oldValue === undefined) oldValue = null;\n    if (newValue === undefined) newValue = null;\n    if (oldValue === null) return newValue !== null;\n    if (oldValue instanceof Object && newValue instanceof Object) {\n      let replace = true;\n      const keysToReplace = [];\n      for (const childKey in newValue) {\n        if (!newValue.hasOwnProperty(childKey)) continue;\n        const replaceChild = this._diffRecursively(\n          oldValue[childKey], newValue[childKey], segments.concat(childKey), updates);\n        if (replaceChild) {\n          keysToReplace.push(childKey);\n        } else {\n          replace = false;\n        }\n      }\n      if (replace) return true;\n      for (const childKey in oldValue) {\n        if (!oldValue.hasOwnProperty(childKey) || newValue.hasOwnProperty(childKey)) continue;\n        updates[segments.concat(childKey).join('/')] = null;\n        delete oldValue[childKey];\n      }\n      for (const childKey of keysToReplace) {\n        updates[segments.concat(childKey).join('/')] = newValue[childKey];\n        oldValue[childKey] = newValue[childKey];\n      }\n    } else {\n      return newValue !== oldValue;\n    }\n  }\n}\n\n\nexport default class Fireworker {\n  constructor(port) {\n    this.ping();\n    this._port = port;\n    this._lastWriteSerial = 0;\n    this._callbacks = {};\n    this._messages = [];\n    this._flushMessageQueue = this._flushMessageQueue.bind(this);\n    port.onmessage = this._receive.bind(this);\n  }\n\n  init({storage, url}) {\n    if (storage) self.localStorage.init(storage);\n    if (url) createRef(url);\n    return {\n      exposedFunctionNames: Object.keys(Fireworker._exposed),\n      version: VERSION,\n      firebaseSdkVersion: Firebase.SDK_VERSION\n    };\n  }\n\n  destroy() {\n    for (const key in this._callbacks) {\n      const callback = this._callbacks[key];\n      if (callback.cancel) callback.cancel();\n    }\n    this._callbacks = {};\n    this._port.onmessage = null;\n    this._messages = [];\n    const k = fireworkers.indexOf(this);\n    if (k >= 0) fireworkers[k] = null;\n  }\n\n  ping() {\n    this.lastTouched = Date.now();\n  }\n\n  bounceConnection() {\n    Firebase.goOffline();\n    Firebase.goOnline();\n  }\n\n  _receive(event) {\n    Fireworker._firstMessageReceived = true;\n    this.lastTouched = Date.now();\n    for (const message of event.data) this._receiveMessage(message);\n  }\n\n  _receiveMessage(message) {\n    let promise;\n    try {\n      const fn = this[message.msg];\n      if (typeof fn !== 'function') throw new Error('Unknown message: ' + message.msg);\n      if (message.writeSerial) {\n        this._lastWriteSerial = Math.max(this._lastWriteSerial, message.writeSerial);\n      }\n      promise = Promise.resolve(fn.call(this, message));\n    } catch (e) {\n      e.immediateFailure = true;\n      promise = Promise.reject(e);\n    }\n    if (!message.oneWay) {\n      promise.then(result => {\n        this._send({msg: 'resolve', id: message.id, result});\n      }, error => {\n        this._send({msg: 'reject', id: message.id, error: errorToJson(error)});\n      });\n    }\n  }\n\n  _send(message) {\n    if (!this._messages.length) Promise.resolve().then(this._flushMessageQueue);\n    this._messages.push(message);\n  }\n\n  _flushMessageQueue() {\n    this._port.postMessage(this._messages);\n    this._messages = [];\n  }\n\n  call({name, args}) {\n    try {\n      return Promise.resolve(Fireworker._exposed[name].apply(null, args));\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  }\n\n  authWithCustomToken({url, authToken, options}) {\n    return createRef(url).authWithCustomToken(authToken, options);\n  }\n\n  unauth({url}) {\n    return createRef(url).unauth();\n  }\n\n  onAuth({url, callbackId}) {\n    const authCallback = this._callbacks[callbackId] = this._onAuthCallback.bind(this, callbackId);\n    authCallback.cancel = this._offAuth.bind(this, url, authCallback);\n    createRef(url).onAuth(authCallback);\n  }\n\n  _offAuth(url, authCallback) {\n    createRef(url).offAuth(authCallback);\n  }\n\n  _onAuthCallback(callbackId, auth) {\n    this._send({msg: 'callback', id: callbackId, args: [auth]});\n  }\n\n  set({url, value}) {\n    return createRef(url).set(value);\n  }\n\n  update({url, value}) {\n    return createRef(url).update(value);\n  }\n\n  once({url}) {\n    return createRef(url).once('value').then(snapshot => this._snapshotToJson(snapshot));\n  }\n\n  on({listenerKey, url, spec, eventType, callbackId, options}) {\n    options = options || {};\n    if (options.sync) options.branch = new Branch();\n    options.cancel = this.off.bind(this, {listenerKey, url, spec, eventType, callbackId});\n    const snapshotCallback = this._callbacks[callbackId] =\n      this._onSnapshotCallback.bind(this, callbackId, options);\n    snapshotCallback.listenerKey = listenerKey;\n    snapshotCallback.eventType = eventType;\n    snapshotCallback.cancel = options.cancel;\n    const cancelCallback = this._onCancelCallback.bind(this, callbackId);\n    createRef(url, spec).on(eventType, snapshotCallback, cancelCallback);\n  }\n\n  off({listenerKey, url, spec, eventType, callbackId}) {\n    let snapshotCallback;\n    if (callbackId) {\n      // Callback IDs will not be reused across on() calls, so it's safe to just delete it.\n      snapshotCallback = this._callbacks[callbackId];\n      delete this._callbacks[callbackId];\n    } else {\n      for (const key of Object.keys(this._callbacks)) {\n        if (!this._callbacks.hasOwnProperty(key)) continue;\n        const callback = this._callbacks[key];\n        if (callback.listenerKey === listenerKey &&\n            (!eventType || callback.eventType === eventType)) {\n          delete this._callbacks[key];\n        }\n      }\n    }\n    createRef(url, spec).off(eventType, snapshotCallback);\n  }\n\n  _onSnapshotCallback(callbackId, options, snapshot) {\n    if (options.sync && options.rest) {\n      const path = decodeURIComponent(\n        snapshot.ref().toString().replace(/.*?:\\/\\/[^/]*/, '').replace(/\\/$/, ''));\n      let value;\n      try {\n        value = normalizeFirebaseValue(snapshot.val());\n      } catch (e) {\n        options.cancel();\n        this._onCancelCallback(callbackId, e);\n        return;\n      }\n      const updates = options.branch.diff(value, path);\n      for (const childPath in updates) {\n        if (!updates.hasOwnProperty(childPath)) continue;\n        this._send({\n          msg: 'callback', id: callbackId,\n          args: [null, {\n            path: childPath, value: updates[childPath], writeSerial: this._lastWriteSerial\n          }]\n        });\n      }\n    } else {\n      try {\n        const snapshotJson = this._snapshotToJson(snapshot);\n        if (options.sync) options.branch.set(snapshotJson.value);\n        this._send({msg: 'callback', id: callbackId, args: [null, snapshotJson]});\n        options.rest = true;\n      } catch (e) {\n        options.cancel();\n        this._onCancelCallback(callbackId, e);\n      }\n    }\n  }\n\n  _onCancelCallback(callbackId, error) {\n    delete this._callbacks[callbackId];\n    this._send({msg: 'callback', id: callbackId, args: [errorToJson(error)]});\n  }\n\n  transaction({url, oldValue, relativeUpdates}) {\n    const transactionPath = decodeURIComponent(url.replace(/.*?:\\/\\/[^/]*/, '').replace(/\\/$/, ''));\n    const ref = createRef(url);\n    const branch = new Branch();\n    let stale;\n\n    return ref.transaction(value => {\n      value = normalizeFirebaseValue(value);\n      stale = !areEqualNormalFirebaseValues(value, oldValue);\n      if (stale) value = oldValue;\n      if (relativeUpdates) {\n        for (const relativePath in relativeUpdates) {\n          if (!relativeUpdates.hasOwnProperty(relativePath)) continue;\n          if (relativePath) {\n            const segments = relativePath.split('/');\n            if (value === undefined || value === null) value = {};\n            let object = value;\n            for (let i = 0; i < segments.length - 1; i++) {\n              const key = segments[i];\n              let child = object[key];\n              if (child === undefined || child === null) child = object[key] = {};\n              object = child;\n            }\n            object[segments[segments.length - 1]] = relativeUpdates[relativePath];\n          } else {\n            value = relativeUpdates[relativePath];\n          }\n        }\n      }\n      branch.set(value);\n      if (!stale) return value;\n    }).catch(error => {\n      if (error.message === 'set' || error.message === 'disconnect') {\n        return ref.once('value').then(snapshot => {\n          return {committed: false, snapshots: [snapshot], writeSerial: this._lastWriteSerial};\n        });\n      }\n      return Promise.reject(error);\n    }).then(result => {\n      const snapshots = [];\n      const updates = branch.diff(normalizeFirebaseValue(result.snapshot.val()), transactionPath);\n      for (const path in updates) {\n        if (!updates.hasOwnProperty(path)) continue;\n        snapshots.push({\n          path, value: updates[path], writeSerial: result.writeSerial || this._lastWriteSerial\n        });\n      }\n      return {committed: !stale, snapshots};\n    });\n  }\n\n  _snapshotToJson(snapshot) {\n    const path =\n      decodeURIComponent(snapshot.ref().toString().replace(/.*?:\\/\\/[^/]*/, '').replace(/\\/$/, ''));\n    return {\n      path, value: normalizeFirebaseValue(snapshot.val()), writeSerial: this._lastWriteSerial\n    };\n  }\n\n  onDisconnect({url, method, value}) {\n    const onDisconnect = createRef(url).onDisconnect();\n    return onDisconnect[method](value);\n  }\n\n  simulate({token, method, url, spec, args}) {\n    interceptConsoleLog();\n    let simulatedFirebase;\n    return (simulationQueue = simulationQueue.catch(() => {/* ignore */}).then(() => {\n      simulationConsoleLogs = [];\n      simulatedFirebase = createRef(url, spec, 'permission_denied_simulator');\n      simulatedFirebase.unauth();\n      return simulatedFirebase.authWithCustomToken(token, () => {/* ignore */}, {remember: 'none'});\n    }).then(() => {\n      return simulatedFirebase[method].apply(simulatedFirebase, args);\n    }).then(() => {\n      return null;\n    }, e => {\n      const code = e.code || e.message;\n      if (code && code.toLowerCase() === 'permission_denied') {\n        return simulationConsoleLogs.join('\\n');\n      }\n      return 'Got a different error in simulation: ' + e;\n    }));\n  }\n\n  static expose(fn, name) {\n    name = name || fn.name;\n    if (!name) throw new Error('Cannot expose a function with no name: ' + fn);\n    if (Fireworker._exposed.hasOwnProperty(name)) {\n      throw new Error(`Function ${name}() already exposed`);\n    }\n    if (Fireworker._firstMessageReceived) {\n      throw new Error('Too late to expose function, worker in use');\n    }\n    Fireworker._exposed[name] = fn;\n  }\n}\n\nFireworker._exposed = {};\nFireworker._firstMessageReceived = false;\n\n\nfunction interceptConsoleLog() {\n  if (consoleIntercepted) return;\n  const originalLog = console.log;\n  let lastTestIndex;\n  console.log = function() {\n    let message = Array.prototype.join.call(arguments, ' ');\n    if (!/^(FIREBASE: \\n?)+/.test(message)) return originalLog.apply(console, arguments);\n    message = message\n      .replace(/^(FIREBASE: \\n?)+/, '')\n      .replace(/^\\s+([^.]*):(?:\\.(read|write|validate):)?.*/g, function(match, g1, g2) {\n        g2 = g2 || 'read';\n        return ' ' + g2 + ' ' + g1;\n      });\n    if (/^\\s+/.test(message)) {\n      const match = message.match(/^\\s+=> (true|false)/);\n      if (match) {\n        simulationConsoleLogs[lastTestIndex] =\n          (match[1] === 'true' ? ' \\u2713' : ' \\u2717') + simulationConsoleLogs[lastTestIndex];\n        lastTestIndex = undefined;\n      } else {\n        if (lastTestIndex === simulationConsoleLogs.length - 1) simulationConsoleLogs.pop();\n        simulationConsoleLogs.push(message);\n        lastTestIndex = simulationConsoleLogs.length - 1;\n      }\n    } else if (/^\\d+:\\d+: /.test(message)) {\n      simulationConsoleLogs.push('   ' + message);\n    } else {\n      if (lastTestIndex === simulationConsoleLogs.length - 1) simulationConsoleLogs.pop();\n      simulationConsoleLogs.push(message);\n      lastTestIndex = undefined;\n    }\n  };\n  consoleIntercepted = true;\n}\n\nfunction errorToJson(error) {\n  const json = {name: error.name};\n  const propertyNames = Object.getOwnPropertyNames(error);\n  for (const propertyName of propertyNames) {\n    json[propertyName] = error[propertyName];\n  }\n  return json;\n}\n\nfunction createRef(url, spec, context) {\n  try {\n    let ref = new Firebase(url, context);\n    if (spec) {\n      switch (spec.by) {\n        case '$key': ref = ref.orderByKey(); break;\n        case '$value': ref = ref.orderByValue(); break;\n        default: ref = ref.orderByChild(spec.by); break;\n      }\n      if (spec.at) ref = ref.equalTo(spec.at);\n      else if (spec.from) ref = ref.startAt(spec.from);\n      else if (spec.to) ref = ref.endAt(spec.to);\n      if (spec.first) ref = ref.limitToFirst(spec.first);\n      else if (spec.last) ref = ref.limitToLast(spec.last);\n    }\n    return ref;\n  } catch (e) {\n    e.extra = {url, spec, context};\n    throw e;\n  }\n}\n\nfunction normalizeFirebaseValue(value) {\n  if (Array.isArray(value)) {\n    const normalValue = {};\n    for (let i = 0; i < value.length; i++) {\n      const item = value[i];\n      if (item === undefined || item === null) continue;\n      normalValue[i] = normalizeFirebaseValue(item);\n    }\n    return normalValue;\n  }\n  if (value instanceof Object) {\n    for (const key in value) {\n      if (value.hasOwnProperty(key)) value[key] = normalizeFirebaseValue(value[key]);\n    }\n  }\n  return value;\n}\n\n\nfunction areEqualNormalFirebaseValues(a, b) {\n  if (a === b) return true;\n  if ((a === null || a === undefined) && (b === null || b === undefined)) return true;\n  if (a === null || b === null) return false;\n  if (!(typeof a === 'object' && typeof b === 'object')) return false;\n  for (const key in a) {\n    if (!a.hasOwnProperty(key) || !b.hasOwnProperty(key)) return false;\n    if (!areEqualNormalFirebaseValues(a[key], b[key])) return false;\n  }\n  for (const key in b) {\n    if (!a.hasOwnProperty(key) || !b.hasOwnProperty(key)) return false;\n  }\n  return true;\n}\n\nfunction acceptConnections() {\n  if (typeof onconnect !== 'undefined') {\n    self.onconnect = function(event) {\n      fireworkers.push(new Fireworker(event.ports[0]));\n    };\n  } else {\n    fireworkers.push(new Fireworker(self));\n  }\n  self.localStorage.flushPending();\n}\n\nconst CONNECTION_CHECK_INTERVAL = 60 * 1000;\nlet lastConnectionCheck = Date.now();\nsetInterval(function findAbandonedConnections() {\n  const now = Date.now(), gap = now - lastConnectionCheck - CONNECTION_CHECK_INTERVAL;\n  lastConnectionCheck = now;\n  fireworkers.forEach(worker => {\n    if (!worker) return;\n    if (gap >= 1000 && worker.lastTouched <= now - gap) worker.lastTouched += gap;\n    if (now - worker.lastTouched >= 3 * CONNECTION_CHECK_INTERVAL) worker.destroy();\n  });\n  let k;\n  while ((k = fireworkers.indexOf(null)) >= 0) fireworkers.splice(k, 1);\n}, CONNECTION_CHECK_INTERVAL);\n\nself.window = self;\nacceptConnections();\n"],"names":["const","let","this","childKey","key"],"mappings":"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"}